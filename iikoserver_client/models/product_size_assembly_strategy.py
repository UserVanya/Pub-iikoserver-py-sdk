# coding: utf-8

"""
    iikoServer API

    API Server позволяет сделать интеграции, которые предназначены для работы с номенклатурой, отчетами, документами, данными сотрудников и приказами.   ### Ограничения и рекомендации - Запросы должны выполняться последовательно друг за другом - Запрашивайте данные за период не длиннее одного месяца, в идеале — за один день или неделю - Для OLAPv2-отчетов рекомендуется устанавливать build-summary=false - При построении OLAPv2-отчета рекомендуется использовать не более 7 полей - Перед выполнением запросов проверяйте их на демо сервере

    The version of the OpenAPI document: 1.0.0
    Generated by OpenAPI Generator (https://openapi-generator.tech)

    Do not edit the class manually.
"""  # noqa: E501


from __future__ import annotations
import json
from enum import Enum
from typing import Optional
from typing_extensions import Self

# XML support imports
from lxml import etree
from lxml.etree import Element


class ProductSizeAssemblyStrategy(str, Enum):
    """
    Способ учета размеров списываемых блюд:  COMMON — технологическая карта содержит строки для продуктов и подразделений; рассчитанное по техкарте списываемое количество умножается на коэффициент списания, настроенный в карточке товара и зафиксированный в документе (акте реализации, списания, и т.п.).  SPECIFIC — \"Отдельные тех.карты для размеров\" — технологическая карта содержит строки для продуктов, размеров приготавливаемого блюда и подразделений; коэффициенты списания, зафиксированные в документах, не учитываются.  Внимание:  Смешивать техкарты разных типов в иерархии техкарт одного элемента номенклатуры не рекомендуется.  Во-первых, техкарта может содержать строки для обоих способов списания (для COMMON без указания размера, для SPECIFIC с указанием размера), даже если их не видно в iikoOffice. Какие строки действуют, определяется по способу учета размера корневого блюда, а не каждой промежуточной заготовки. Из-за этого одна и та же заготовка может списываться по-разному в разных блюдах.  Во-вторых, в случае, когда техкарта не содержит лишних данных для \"не своего\" типа списания, результат ее умножения на техкарту другого типа равен нулю (никакое списание не происходит).
    """

    """
    allowed enum values
    """
    COMMON = 'COMMON'
    SPECIFIC = 'SPECIFIC'

    @classmethod
    def from_json(cls, json_str: str) -> Self:
        """Create an instance of ProductSizeAssemblyStrategy from a JSON string"""
        return cls(json.loads(json_str))

    @classmethod
    def from_xml(cls, xml_str: str) -> Optional[Self]:
        """Create an instance of ProductSizeAssemblyStrategy from an XML string"""
        try:
            if isinstance(xml_str, str):
                xml_str = xml_str.encode('utf-8')
            root = etree.fromstring(xml_str)
            return cls.from_xml_element(root)
        except Exception as e:
            raise ValueError(f"Failed to parse XML: {e}")

    @classmethod
    def from_xml_element(cls, element: Element) -> Optional[Self]:
        """Create an instance of ProductSizeAssemblyStrategy from an XML element"""
        if element is None:
            return None
        
        # Get the text content of the element
        text_value = element.text
        if text_value is not None and text_value.strip() != "" and text_value != "null":
            try:
                return cls(text_value)
            except ValueError:
                # If the value doesn't match any enum value, return None or raise error
                # depending on desired behavior
                return None
        return None


