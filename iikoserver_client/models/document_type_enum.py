# coding: utf-8

"""
    iikoServer API

    API Server позволяет сделать интеграции, которые предназначены для работы с номенклатурой, отчетами, документами, данными сотрудников и приказами.   ### Ограничения и рекомендации - Запросы должны выполняться последовательно друг за другом - Запрашивайте данные за период не длиннее одного месяца, в идеале — за один день или неделю - Для OLAPv2-отчетов рекомендуется устанавливать build-summary=false - При построении OLAPv2-отчета рекомендуется использовать не более 7 полей - Перед выполнением запросов проверяйте их на демо сервере

    The version of the OpenAPI document: 1.0.0
    Generated by OpenAPI Generator (https://openapi-generator.tech)

    Do not edit the class manually.
"""  # noqa: E501


from __future__ import annotations
import json
from enum import Enum
from typing import Optional
from typing_extensions import Self

# XML support imports
from lxml import etree
from lxml.etree import Element


class DocumentTypeEnum(str, Enum):
    """
    Типы документов в системе
    """

    """
    allowed enum values
    """
    INCOMING_INVOICE = 'INCOMING_INVOICE'
    INCOMING_INVENTORY = 'INCOMING_INVENTORY'
    INCOMING_SERVICE = 'INCOMING_SERVICE'
    OUTGOING_SERVICE = 'OUTGOING_SERVICE'
    WRITEOFF_DOCUMENT = 'WRITEOFF_DOCUMENT'
    SALES_DOCUMENT = 'SALES_DOCUMENT'
    SESSION_ACCEPTANCE = 'SESSION_ACCEPTANCE'
    INTERNAL_TRANSFER = 'INTERNAL_TRANSFER'
    OUTGOING_INVOICE = 'OUTGOING_INVOICE'
    RETURNED_INVOICE = 'RETURNED_INVOICE'
    PRODUCTION_DOCUMENT = 'PRODUCTION_DOCUMENT'
    TRANSFORMATION_DOCUMENT = 'TRANSFORMATION_DOCUMENT'
    PRODUCTION_ORDER = 'PRODUCTION_ORDER'
    CONSOLIDATED_ORDER = 'CONSOLIDATED_ORDER'
    PREPARED_REGISTER = 'PREPARED_REGISTER'
    MENU_CHANGE = 'MENU_CHANGE'
    PRODUCT_REPLACEMENT = 'PRODUCT_REPLACEMENT'
    SALES_RETURN_DOCUMENT = 'SALES_RETURN_DOCUMENT'
    DISASSEMBLE_DOCUMENT = 'DISASSEMBLE_DOCUMENT'
    FUEL_ACCEPTANCE = 'FUEL_ACCEPTANCE'
    FUEL_GAGING_DOCUMENT = 'FUEL_GAGING_DOCUMENT'
    PAYROLL = 'PAYROLL'

    @classmethod
    def from_json(cls, json_str: str) -> Self:
        """Create an instance of DocumentTypeEnum from a JSON string"""
        return cls(json.loads(json_str))

    @classmethod
    def from_xml(cls, xml_str: str) -> Optional[Self]:
        """Create an instance of DocumentTypeEnum from an XML string"""
        try:
            if isinstance(xml_str, str):
                xml_str = xml_str.encode('utf-8')
            root = etree.fromstring(xml_str)
            return cls.from_xml_element(root)
        except Exception as e:
            raise ValueError(f"Failed to parse XML: {e}")

    @classmethod
    def from_xml_element(cls, element: Element) -> Optional[Self]:
        """Create an instance of DocumentTypeEnum from an XML element"""
        if element is None:
            return None
        
        # Get the text content of the element
        text_value = element.text
        if text_value is not None and text_value.strip() != "" and text_value != "null":
            try:
                return cls(text_value)
            except ValueError:
                # If the value doesn't match any enum value, return None or raise error
                # depending on desired behavior
                return None
        return None


