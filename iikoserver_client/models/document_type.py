# coding: utf-8

"""
    iikoServer API

    API Server позволяет сделать интеграции, которые предназначены для работы с номенклатурой, отчетами, документами, данными сотрудников и приказами.   ### Ограничения и рекомендации - Запросы должны выполняться последовательно друг за другом - Запрашивайте данные за период не длиннее одного месяца, в идеале — за один день или неделю - Для OLAPv2-отчетов рекомендуется устанавливать build-summary=false - При построении OLAPv2-отчета рекомендуется использовать не более 7 полей - Перед выполнением запросов проверяйте их на демо сервере

    The version of the OpenAPI document: 1.0.0
    Generated by OpenAPI Generator (https://openapi-generator.tech)

    Do not edit the class manually.
"""  # noqa: E501


from __future__ import annotations
import json
from enum import Enum
from typing import Optional
from typing_extensions import Self

# XML support imports
from lxml import etree
from lxml.etree import Element


class DocumentType(str, Enum):
    """
    Типы документов:  INCOMING_INVOICE - Приходная накладная (п/н) INCOMING_INVENTORY - Инвентаризация (инв) INCOMING_SERVICE - Акт приема услуг (в/с) OUTGOING_SERVICE - Акт оказания услуг (в/с) WRITEOFF_DOCUMENT - Акт списания (а/с) SALES_DOCUMENT - Акт реализации (а/р) SESSION_ACCEPTANCE - Принятие смены (п/с) INTERNAL_TRANSFER - Внутреннее перемещение (в/п) OUTGOING_INVOICE - Расходная накладная (р/н) RETURNED_INVOICE - Возвратная накладная (в/н) PRODUCTION_DOCUMENT - Акт приготовления (а/пр) TRANSFORMATION_DOCUMENT - Акт переработки (а/пб) PRODUCTION_ORDER - Заказ в производство (з/п) CONSOLIDATED_ORDER - Консолидированный заказ (к/з) PREPARED_REGISTER - Ведомость полуфабрикатов (в/пф) MENU_CHANGE - Приказ об изменении прейскуранта (п/м) PRODUCT_REPLACEMENT - Замена товаров (з/т) SALES_RETURN_DOCUMENT - Акт приема возврата (п/в) DISASSEMBLE_DOCUMENT - Акт разбора (а/рб) PAYROLL - Платёжная ведомость (з/в) INCOMING_CASH_ORDER - Приходный кассовый ордер (п/ко) OUTGOING_CASH_ORDER - Расходный кассовый ордер (р/ко)
    """

    """
    allowed enum values
    """
    INCOMING_INVOICE = 'INCOMING_INVOICE'
    INCOMING_INVENTORY = 'INCOMING_INVENTORY'
    INCOMING_SERVICE = 'INCOMING_SERVICE'
    OUTGOING_SERVICE = 'OUTGOING_SERVICE'
    WRITEOFF_DOCUMENT = 'WRITEOFF_DOCUMENT'
    SALES_DOCUMENT = 'SALES_DOCUMENT'
    SESSION_ACCEPTANCE = 'SESSION_ACCEPTANCE'
    INTERNAL_TRANSFER = 'INTERNAL_TRANSFER'
    OUTGOING_INVOICE = 'OUTGOING_INVOICE'
    RETURNED_INVOICE = 'RETURNED_INVOICE'
    PRODUCTION_DOCUMENT = 'PRODUCTION_DOCUMENT'
    TRANSFORMATION_DOCUMENT = 'TRANSFORMATION_DOCUMENT'
    PRODUCTION_ORDER = 'PRODUCTION_ORDER'
    CONSOLIDATED_ORDER = 'CONSOLIDATED_ORDER'
    PREPARED_REGISTER = 'PREPARED_REGISTER'
    MENU_CHANGE = 'MENU_CHANGE'
    PRODUCT_REPLACEMENT = 'PRODUCT_REPLACEMENT'
    SALES_RETURN_DOCUMENT = 'SALES_RETURN_DOCUMENT'
    DISASSEMBLE_DOCUMENT = 'DISASSEMBLE_DOCUMENT'
    PAYROLL = 'PAYROLL'
    INCOMING_CASH_ORDER = 'INCOMING_CASH_ORDER'
    OUTGOING_CASH_ORDER = 'OUTGOING_CASH_ORDER'

    @classmethod
    def from_json(cls, json_str: str) -> Self:
        """Create an instance of DocumentType from a JSON string"""
        return cls(json.loads(json_str))

    @classmethod
    def from_xml(cls, xml_str: str) -> Optional[Self]:
        """Create an instance of DocumentType from an XML string"""
        try:
            if isinstance(xml_str, str):
                xml_str = xml_str.encode('utf-8')
            root = etree.fromstring(xml_str)
            return cls.from_xml_element(root)
        except Exception as e:
            raise ValueError(f"Failed to parse XML: {e}")

    @classmethod
    def from_xml_element(cls, element: Element) -> Optional[Self]:
        """Create an instance of DocumentType from an XML element"""
        if element is None:
            return None
        
        # Get the text content of the element
        text_value = element.text
        if text_value is not None and text_value.strip() != "" and text_value != "null":
            try:
                return cls(text_value)
            except ValueError:
                # If the value doesn't match any enum value, return None or raise error
                # depending on desired behavior
                return None
        return None


